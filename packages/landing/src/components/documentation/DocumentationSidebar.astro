---
import DocumentationSidebarItem from "./DocumentationSidebarItem.astro";

// Flatten all documentation pages for sidebar navigation
const docPages = [
  {
    title: "REST API",
    pages: [
      {
        title: "Getting started",
        href: "/documentation/installation",
        comingSoon: true,
      },
    ],
  },
  {
    title: "TypeScript SDK",
    pages: [
      {
        title: "Getting started",
        href: "/documentation/sdk",
        comingSoon: false,
      },
    ],
  },
  {
    title: "Self-hosting",
    pages: [
      {
        title: "Getting started",
        href: "/documentation/documents",
        comingSoon: true,
      },
    ],
  },
  {
    title: "Examples",
    pages: [
      {
        title: "Overview",
        href: "/documentation/examples",
        comingSoon: false,
      },
    ],
  },
];

const currentPath = Astro.url.pathname;
---

<aside
  class="hidden md:block w-56 bg-white sticky top-0 self-start max-h-screen overflow-y-auto"
>
  <nav class="flex flex-col gap-y-8">
    <DocumentationSidebarItem
      title="Overview"
      href="/documentation"
      currentPath={currentPath}
    />
    {
      docPages.map((section) => (
        <div class="flex flex-col gap-y-2">
          <div class="flex items-center gap-x-2 px-3 mb-1">
            <h3 class="text-xs font-medium text-gray-500">{section.title}</h3>
          </div>
          <ul class="flex flex-col gap-y-1">
            {section.pages.map((page) => (
              <li>
                <DocumentationSidebarItem
                  title={page.title}
                  href={page.href}
                  comingSoon={page.comingSoon ?? false}
                  currentPath={currentPath}
                />
              </li>
            ))}
          </ul>
        </div>
      ))
    }
  </nav>
</aside>
