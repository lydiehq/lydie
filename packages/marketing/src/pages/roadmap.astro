---
import Layout from "../layouts/Layout.astro";
import Container from "../components/Container.astro";
import { GradientOutline } from "../components/generic/GradientOutline";
import Divider from "../components/landing/Divider.astro";
import {
  CheckmarkRegular,
  CircleRegular,
  ClockRegular,
} from "@fluentui/react-icons";
import { SectionHeader } from "src/components/landing/SectionHeader";

type RoadmapItem = {
  title: string;
  description: string;
  status: "completed" | "in-progress" | "planned";
  link?: string;
};

const roadmapItems: RoadmapItem[] = [
  {
    title: "Real-time collaboration",
    description: "Collaborate with others in real-time.",
    status: "completed",
    link: "https://lydie.co/blog/real-time-collaboration-implementation-in-lydie",
  },
  {
    title: "Desktop app",
    description:
      "Native desktop application for an installable experience across platforms.",
    status: "planned",
  },
  {
    title: "DOCX/PDF exports",
    description: "Export your documents to DOCX and PDF formats.",
    status: "planned",
  },
  {
    title: "Cross-platform publishing",
    description:
      "Allow third-party publishing to platforms like Shopify and WordPress, with syncing capabilities.",
    status: "planned",
  },
  {
    title: "LLM selection",
    description: "Choose which LLM to use for AI-powered features.",
    status: "planned",
  },
  {
    title: "Trash",
    description: "Retrieve previously deleted documents from trash.",
    status: "planned",
  },
  {
    title: "Diff view",
    description: "Proper diff view when applying changes to a document.",
    status: "planned",
  },
  {
    title: "Cross-document referencing",
    description:
      "Allow referencing other documents in LLM-chats using '@'-mentions.",
    status: "completed",
  },
  {
    title: "LLM web search",
    description: "Allow LLM to search the web for information.",
    status: "completed",
  },
  {
    title: "Document history",
    description:
      "Track every change with full version history, so you never lose your work.",
    status: "planned",
  },
];

function getStatusIcon(status: string) {
  switch (status) {
    case "completed":
      return CheckmarkRegular;
    case "in-progress":
      return ClockRegular;
    default:
      return CircleRegular;
  }
}

function getStatusLabel(status: string) {
  switch (status) {
    case "completed":
      return "Completed";
    case "in-progress":
      return "In Progress";
    default:
      return "Planned";
  }
}
---

<Layout
  title="Roadmap - Lydie"
  description="See what we're building and what's coming next for Lydie."
>
  <div class="max-w-4xl relative">
    <!-- 768px internal width, centered (w-1 = 4px each side) -->
    <div
      class="fixed inset-y-0 w-1 border-r border-black/4"
      style="left: calc(50% - 388px)"
    >
    </div>
    <div
      class="fixed inset-y-0 w-1 border-r border-black/4"
      style="right: calc(50% - 388px)"
    >
    </div>
  </div>

  <Container
    className="flex flex-col items-center justify-center min-h-[40vh] py-16 gap-y-32"
  >
    <div class="p-4 relative size-full">
      <GradientOutline client:load />
      <SectionHeader
        eyebrow="Roadmap"
        title="What we're building"
        description="Our roadmap shows what we've shipped, what we're working on, and what's coming next."
      />
    </div>

    <div class="max-w-xl mx-auto flex flex-col gap-y-8 w-full">
      <div class="prose mx-auto w-full">
        <p class="">
          We're building Lydie in the open. Our roadmap is public and constantly
          evolving based on your feedback. Below you'll find features we've
          already shipped, what we're actively working on, and what's planned
          for the future.
        </p>
      </div>

      <Divider />

      <div class="flex flex-col gap-y-6">
        {
          roadmapItems.map((item) => {
            const StatusIcon = getStatusIcon(item.status);
            const statusLabel = getStatusLabel(item.status);

            return (
              <div class="flex items-start gap-4">
                <div class="flex items-center justify-center w-8 h-8 rounded-full bg-gray-100 shrink-0 mt-0.5">
                  <StatusIcon className="size-4 text-gray-600" />
                </div>
                <div class="flex-1 flex flex-col gap-y-1">
                  <div class="flex items-center gap-x-2">
                    {item.link ? (
                      <a
                        href={item.link}
                        target="_blank"
                        rel="noopener noreferrer"
                        class="font-medium text-black/85 hover:text-black/70 underline"
                      >
                        {item.title}
                      </a>
                    ) : (
                      <h3 class="font-medium text-black/85">{item.title}</h3>
                    )}
                    <span class="text-xs font-medium text-black/50 uppercase tracking-wide">
                      {statusLabel}
                    </span>
                  </div>
                  <p class="text-base/relaxed text-black/60">
                    {item.description}
                  </p>
                </div>
              </div>
            );
          })
        }
      </div>

      <Divider />

      <div class="flex flex-col gap-y-3 text-center">
        <h2 class="text-2xl tracking-tight font-medium text-black/85">
          Have a feature request?
        </h2>
        <p class="text-base/relaxed text-black/60 text-balance">
          We'd love to hear your ideas. Share your feedback and help shape the
          future of Lydie.
        </p>
        <a
          href="https://github.com/lydiehq/lydie/issues"
          target="_blank"
          rel="noopener noreferrer"
          class="text-base font-medium text-black/70 hover:text-black/90 underline"
        >
          Open an issue on GitHub
        </a>
      </div>
    </div>
  </Container>
</Layout>
