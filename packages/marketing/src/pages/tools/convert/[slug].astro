---
import Layout from "../../../layouts/Layout.astro";
import { UniversalConverter } from "../../../components/tools/UniversalConverter";
import { HowToSection } from "../../../components/tools/HowToSection";
import { FAQSection } from "../../../components/tools/FAQSection";
import { RelatedConverters } from "../../../components/tools/RelatedConverters";
import { conversionConfigs } from "../../../data/conversions";

export function getStaticPaths() {
  return conversionConfigs.map((config) => ({
    params: { slug: config.slug },
    props: { config },
  }));
}

const { config } = Astro.props;

// Structured data for SEO
const structuredData = {
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  name: config.h1,
  description: config.description,
  applicationCategory: "UtilityApplication",
  operatingSystem: "Web Browser",
  offers: {
    "@type": "Offer",
    price: "0",
    priceCurrency: "USD",
  },
  aggregateRating: {
    "@type": "AggregateRating",
    ratingValue: "4.8",
    ratingCount: "1250",
  },
  featureList: [
    "Free to use",
    "No sign-up required",
    "No watermarks",
    "Secure processing",
    "Instant conversion",
  ],
};

// Breadcrumb structured data
const breadcrumbData = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  itemListElement: [
    {
      "@type": "ListItem",
      position: 1,
      name: "Home",
      item: "https://lydie.co",
    },
    {
      "@type": "ListItem",
      position: 2,
      name: "Tools",
      item: "https://lydie.co/tools",
    },
    {
      "@type": "ListItem",
      position: 3,
      name: "Document Converter",
      item: "https://lydie.co/tools/convert",
    },
    {
      "@type": "ListItem",
      position: 4,
      name: config.h1,
      item: `https://lydie.co/tools/convert/${config.slug}`,
    },
  ],
};

// FAQ structured data
const faqData = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  mainEntity: config.faqs.map((faq) => ({
    "@type": "Question",
    name: faq.q,
    acceptedAnswer: {
      "@type": "Answer",
      text: faq.a,
    },
  })),
};
---

<Layout title={config.title} description={config.description}>
  <!-- Structured Data -->
  <script
    type="application/ld+json"
    set:html={JSON.stringify(structuredData)}
  />
  <script
    type="application/ld+json"
    set:html={JSON.stringify(breadcrumbData)}
  />
  <script type="application/ld+json" set:html={JSON.stringify(faqData)} />

  <!-- Breadcrumbs -->
  <div class="max-w-7xl mx-auto px-4 py-4">
    <nav class="flex text-sm text-gray-600" aria-label="Breadcrumb">
      <ol class="inline-flex items-center space-x-1 md:space-x-3">
        <li class="inline-flex items-center">
          <a href="/" class="hover:text-gray-900">Home</a>
        </li>
        <li>
          <div class="flex items-center">
            <span class="mx-2">/</span>
            <a href="/tools" class="hover:text-gray-900">Tools</a>
          </div>
        </li>
        <li>
          <div class="flex items-center">
            <span class="mx-2">/</span>
            <a href="/tools/convert" class="hover:text-gray-900">Convert</a>
          </div>
        </li>
        <li aria-current="page">
          <div class="flex items-center">
            <span class="mx-2">/</span>
            <span class="text-gray-900 font-medium">{config.h1}</span>
          </div>
        </li>
      </ol>
    </nav>
  </div>

  <UniversalConverter config={config} client:load />

  <!-- How-to section -->
  <div class="max-w-4xl mx-auto px-4 py-12 space-y-12">
    <HowToSection steps={config.howToSteps} />

    <!-- SEO content -->
    <div class="prose max-w-none">
      <h2>About {config.h1}</h2>
      <p>
        {config.description} Our free online converter uses Pandoc, the industry-standard
        document conversion tool, to ensure high-quality output that preserves your
        formatting and structure.
      </p>

      <h3>Features</h3>
      <ul>
        <li>Free to use - no sign-up required</li>
        <li>No watermarks or branding</li>
        <li>Fast, server-side conversion</li>
        <li>Secure - files are deleted immediately</li>
        <li>Support for tables, images, and complex formatting</li>
      </ul>

      <h3>Use Cases</h3>
      <p>
        Convert {config.fromFormat} to {config.toFormat} for:
      </p>
      <ul>
        <li>Creating professional documents and reports</li>
        <li>Sharing content with collaborators</li>
        <li>Publishing documentation</li>
        <li>Archiving content in different formats</li>
      </ul>
    </div>

    <!-- FAQs -->
    <FAQSection faqs={config.faqs} />

    <!-- Related converters -->
    <RelatedConverters slugs={config.relatedSlugs} />
  </div>
</Layout>
