---
import Layout from "../../../layouts/Layout.astro";
import Breadcrumbs from "../../../components/Breadcrumbs.astro";
import { UniversalConverter } from "../../../components/tools/UniversalConverter";
import { HowToSection } from "../../../components/tools/HowToSection";
import { FAQ } from "../../../components/generic/FAQ";
import { RelatedConverters } from "../../../components/tools/RelatedConverters";
import { conversionConfigs } from "../../../data/conversions";
import { Container } from "../../../components/Container";

export function getStaticPaths() {
  return conversionConfigs.map((config) => ({
    params: { slug: config.slug },
    props: { config },
  }));
}

const { config } = Astro.props;

const breadcrumbs = [
  { label: "Home", href: "/" },
  { label: "Tools", href: "/tools" },
  { label: "Convert", href: "/tools/convert" },
  { label: config.h1, href: null }, // null means it's the current page
];

const structuredData = {
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  name: config.h1,
  description: config.description,
  applicationCategory: "UtilityApplication",
  operatingSystem: "Web Browser",
  featureList: [
    "Free to use",
    "No sign-up required",
    "No watermarks",
    "Secure processing",
    "Instant conversion",
  ],
};

const faqItems = config.faqs.map((faq) => ({
  question: faq.q,
  answer: faq.a,
}));

const faqData = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  mainEntity: faqItems.map((faq) => ({
    "@type": "Question",
    name: faq.question,
    acceptedAnswer: {
      "@type": "Answer",
      text: faq.answer,
    },
  })),
};
---

<Layout title={config.title} description={config.description}>
  <script
    type="application/ld+json"
    set:html={JSON.stringify(structuredData)}
  />
  <script type="application/ld+json" set:html={JSON.stringify(faqData)} />
  <Container className="py-12">
    <div class="class flex flex-col gap-y-4">
      <Breadcrumbs items={breadcrumbs} />
      <UniversalConverter config={config} client:load />
    </div>
    <HowToSection steps={config.howToSteps} />

    <div class="prose max-w-none">
      <h2>About {config.h1}</h2>
      <p>
        {config.description} Our free online converter uses Pandoc, the industry-standard
        document conversion tool, to ensure high-quality output that preserves your
        formatting and structure.
      </p>

      <h3>Features</h3>
      <ul>
        <li>Free to use - no sign-up required</li>
        <li>No watermarks or branding</li>
        <li>Fast, server-side conversion</li>
        <li>Secure - files are deleted immediately</li>
        <li>Support for tables, images, and complex formatting</li>
      </ul>

      <h3>Use Cases</h3>
      <p>
        Convert {config.fromFormat} to {config.toFormat} for:
      </p>
      <ul>
        <li>Creating professional documents and reports</li>
        <li>Sharing content with collaborators</li>
        <li>Publishing documentation</li>
        <li>Archiving content in different formats</li>
      </ul>
    </div>
    <FAQ items={faqItems} client:load />
    <RelatedConverters slugs={config.relatedSlugs} />
  </Container>
</Layout>
