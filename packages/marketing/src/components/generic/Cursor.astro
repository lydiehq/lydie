---
import { getColorById, type ColorId } from "@lydie/core/colors";

interface Props {
  name: string;
  colorId: ColorId;
  position?: "top" | "right" | "bottom" | "left";
  class?: string;
  delay?: number;
}

const {
  name,
  colorId,
  position = "top",
  class: className = "",
  delay = 0,
} = Astro.props;

const color = getColorById(colorId)?.value ?? "#9BB5D4";

const positionClasses = {
  top: "bottom-full mb-1",
  bottom: "top-full mt-1",
  left: "right-full mr-1 top-1/2 -translate-y-1/2",
  right: "left-full ml-1 top-1/2 -translate-y-1/2",
};

const labelPositionClasses = {
  top: "rounded-[8px] rounded-bl-none",
  bottom: "rounded-[8px] rounded-tl-none",
  left: "rounded-[8px] rounded-tr-none",
  right: "rounded-[8px] rounded-tl-none",
};

const animationDelay = `${delay + 0.6}s`;
---

<style>
  @keyframes cursor-pop {
    0% {
      opacity: 0;
      transform: scale(0.8);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  .cursor-animate {
    animation: cursor-pop 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
    opacity: 0;
  }
</style>

<span
  class={`relative inline-flex items-center justify-center ${className} cursor-animate`}
  style={`animation-delay: ${animationDelay};`}
>
  <span
    class={`absolute ${positionClasses[position]} ${labelPositionClasses[position]} shadow-legit text-[12px] font-semibold leading-normal px-[0.3rem] py-[0.1rem] select-none whitespace-nowrap text-white`}
    style={`background-color: ${color}`}
  >
    {name}
  </span>
</span>
