---
import { Container } from "../Container";
import { Button } from "../generic/Button";
import screenshotNew from "../../../public/screenshot_new.png";
import { Image } from "astro:assets";

const imageSrc = screenshotNew;
const imageAlt =
  "Screenshot of the the Lydie platform including a sidebar with a document tree as well as the main WYSIWYG editor focusing on a document titled 'The Enduring Allure of Coffee'.";
---

<div class="md:px-4 mb-32">
  <div
    class="md:rounded-xl custom-inner-shadow grainy-gradient-container md:ring md:ring-black/20 relative md:px-4"
  >
    <div
      class="absolute bottom-0 inset-x-0 h-22 bg-linear-to-t from-black/20 z-20 gradient-overlay"
    >
    </div>
    <svg class="grainy-gradient-svg">
      <filter id="noiseFilter">
        <feTurbulence
          type="fractalNoise"
          baseFrequency="0.65"
          numOctaves="3"
          stitchTiles="stitch"></feTurbulence>
      </filter>
    </svg>
    <svg
      viewBox="0 0 256 256"
      xmlns="http://www.w3.org/2000/svg"
      class="embossed-logo"
    >
      <path
        fill="currentColor"
        fill-rule="evenodd"
        d="M41.27 222.049c-.67-.618-.218-1.727.695-1.712 37.82.621 81.574-4.599 123.467-20.608 31.858-12.175 62.564-30.604 88.556-57.154.664-.679 1.812-.141 1.699.802C248.073 206.82 193.944 256 128.302 256c-33.588 0-64.162-12.876-87.032-33.951ZM8.475 172.36a.985.985 0 0 1-.797-.643C2.71 158.076 0 143.354 0 128 0 57.308 57.443 0 128.302 0c53.062 0 98.601 32.136 118.129 77.965a.999.999 0 0 1-.072.916c-24.815 39.85-59.9 64.094-97.239 78.364-49.113 18.769-102.352 20.214-140.645 15.115Z"
        clip-rule="evenodd"></path>
    </svg>
    <Container className="flex flex-col relative z-10 pb-16 pt-28">
      <div class="flex flex-col gap-y-3 max-w-2xl text-center mx-auto">
        <div
          class="mb-4 rounded-full bg-white/80 self-center px-2 py-0.5 flex items-center gap-x-1.5 hero-badge"
          style="box-shadow: 0 1px rgba(255,255,255,0.3) inset, 0 1px 3px rgba(0,0,0,0.15), 0 1px 1.5px 0 rgba(0,0,0,0.08), 0 0 1.5px 0 rgba(0,0,0,0.2), 0 0 40px rgba(255,255,255,0.09), 0 0 80px rgba(255,255,255,0.06), 0 0 120px rgba(255,255,255,0.03);"
        >
          <div class="rounded-full bg-orange-300 size-1.5"></div>
          <span class="text-[12px] font-medium text-gray-700"
            >Now in open beta!</span
          >
        </div>
        <h1
          class="text-5xl font-heading font-medium tracking-tight text-white drop-shadow-text"
        >
          <span class="hero-word-1">Centralize</span>{" "}
          <span class="hero-word-2">your</span>{" "}
          <span class="hero-word-3">writing</span>
        </h1>
        <p class="text-[17px]/relaxed text-white/90 text-balance">
          <span class="hero-sentence-1"
            >Lydie is a writing workspace that adapts to your needs.</span
          >
          <br />
          <span class="hero-sentence-2"
            >An open-source alternative to Google Docs, Notion and others.</span
          >
        </p>
        <div class="flex items-center justify-center gap-x-1.5 mt-4">
          <div
            class="hero-button-1 ring ring-white/1 p-0.5 bg-black/4 rounded-[8px]"
          >
            <Button
              href="https://app.lydie.co/auth"
              size="lg"
              intent="primary"
              client:load
            >
              <span>Start Lydie free</span>
            </Button>
          </div>
          <div class="hero-button-2">
            <Button
              href="https://github.com/lsalling/lydie"
              size="lg"
              target="_blank"
              intent="ghost"
              className="text-white hover:bg-white/10"
              client:load
            >
              <div class="flex items-center gap-x-1.5">
                <span>Star on GitHub</span>
              </div>
            </Button>
          </div>
        </div>
      </div>
    </Container>
    <div
      class="relative bg-white/20 hidden rounded-[14px] -mb-40 p-2 md:flex flex-col before:pointer-events-none before:absolute before:bottom-0 before:left-0 before:right-0 before:h-60 before:bg-linear-to-t before:from-black/40 before:via-black/20 before:to-transparent before:rounded-b-xl before:-z-10 after:pointer-events-none after:absolute after:inset-0 after:-z-10 after:rounded-xl after:bg-linear-to-b after:from-white/14 after:mix-blend-overlay overflow-hidden max-w-6xl mx-auto hero-image"
      style="box-shadow: 0 1px rgba(255,255,255,0.3) inset, 0 1px 3px rgba(0,0,0,0.15), 0 1px 1.5px 0 rgba(0,0,0,0.08), 0 0 1.5px 0 rgba(0,0,0,0.2), 0 0 40px rgba(255,255,255,0.09), 0 0 80px rgba(255,255,255,0.06), 0 0 120px rgba(255,255,255,0.03);"
    >
      <div class="shimmer-container absolute inset-0 pointer-events-none"></div>
      <div class="flex items-center gap-x-1.5 mb-2 relative z-10">
        {
          [...Array(3)].map(() => (
            <div class="rounded-full size-[13px] bg-white/25" />
          ))
        }
      </div>

      <div
        class="p-px ring ring-white/20 rounded-[9px] bg-white/10 relative overflow-hidden"
      >
        <div
          class="rounded-lg overflow-hidden shadow-surface ring ring-black/8 relative z-10"
        >
          <Image src={imageSrc} alt={imageAlt} quality={100} loading="eager" />
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .grainy-gradient-svg {
    position: absolute;
    width: 0;
    height: 0;
  }

  .grainy-gradient-container {
    position: relative;
    overflow: hidden;
  }

  .grainy-gradient-container::after {
    content: "";
    position: absolute;
    inset: 0;
    background-image:
      radial-gradient(circle at 20% 30%, #1f1f1f 0%, transparent 48%),
      radial-gradient(circle at 80% 70%, #141414 0%, transparent 48%),
      radial-gradient(circle at 50% 50%, #000000 0%, transparent 58%),
      radial-gradient(circle at 10% 80%, #030303 0%, transparent 38%),
      radial-gradient(circle at 90% 20%, #050505 0%, transparent 43%),
      linear-gradient(135deg, #000000 0%, #141414 50%, #000000 100%);
    opacity: 0.95;
    z-index: 0;
    pointer-events: none;
  }

  .grainy-gradient-container::before {
    content: "";
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    background-size: 200px 200px;
    filter: contrast(270%) brightness(1000%);
    opacity: 1;
    z-index: 1;
    pointer-events: none;
    mix-blend-mode: overlay;
  }

  .grainy-gradient-container
    > :not(.grainy-gradient-svg):not(.gradient-overlay):not(.embossed-logo) {
    position: relative;
    z-index: 10;
  }

  .embossed-logo {
    position: absolute;
    top: 20%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 140%;
    pointer-events: none;
    z-index: 2;
    color: rgba(0, 0, 0, 0.2);
  }

  .drop-shadow-text {
    text-shadow:
      0 2px 8px rgba(0, 0, 0, 0.3),
      0 1px 3px rgba(0, 0, 0, 0.2);
  }

  .custom-inner-shadow {
    box-shadow:
      inset 0 2px 8px rgba(0, 0, 0, 0.15),
      inset 0 1px 4px rgba(0, 0, 0, 0.2),
      inset 0 0 0 1px rgba(0, 0, 0, 0.1),
      inset 0 -2px 12px rgba(0, 0, 0, 0.12);
  }

  /* Animation keyframes for hero elements - bottom to top */
  @keyframes hero-fade-in-up {
    from {
      opacity: 0;
      transform: translateY(14px);
      filter: blur(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
      filter: blur(0px);
    }
  }

  @keyframes hero-image-fade-in-up {
    from {
      opacity: 0;
      transform: translateY(8px);
      filter: blur(2px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
      filter: blur(0px);
    }
  }

  /* Apply animations to hero elements */
  /* Staggered word animations */
  .hero-word-1 {
    display: inline-block;
    animation: hero-fade-in-up 0.8s ease-out 0.3s both;
  }

  .hero-word-2 {
    display: inline-block;
    animation: hero-fade-in-up 0.8s ease-out 0.42s both;
  }

  .hero-word-3 {
    display: inline-block;
    animation: hero-fade-in-up 0.8s ease-out 0.54s both;
  }

  /* Staggered sentence animations */
  .hero-sentence-1 {
    display: inline-block;
    animation: hero-fade-in-up 0.8s ease-out 0.7s both;
  }

  .hero-sentence-2 {
    display: inline-block;
    animation: hero-fade-in-up 0.8s ease-out 0.85s both;
  }

  /* Staggered button animations */
  .hero-button-1 {
    animation: hero-fade-in-up 0.6s ease-out 1s both;
  }

  .hero-button-2 {
    animation: hero-fade-in-up 0.6s ease-out 1.15s both;
  }

  /* Badge comes in last */
  .hero-badge {
    animation: hero-fade-in-up 0.6s ease-out 1.3s both;
  }

  .hero-image {
    animation: hero-image-fade-in-up 1s ease-out 0.8s both;
  }

  /* Shimmer effect for screenshot container */
  .shimmer-container {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    border-radius: 14px;
    overflow: hidden;
  }

  .shimmer-container::before {
    content: "";
    position: absolute;
    pointer-events: none;
    z-index: 0;
    border-radius: 14px;
  }

  .shimmer-container::before {
    top: -10%;
    left: 0;
    width: 40%;
    height: 30%;
    background: radial-gradient(
      ellipse,
      rgba(255, 255, 255, 0.3) 0%,
      rgba(255, 255, 255, 0.15) 50%,
      transparent 100%
    );
    filter: blur(20px);
    animation: shimmer-sweep 8s ease-in-out infinite;
  }

  @keyframes shimmer-sweep {
    0% {
      transform: translateX(0);
      opacity: 0.4;
    }
    50% {
      transform: translateX(calc(100% - 40%));
      opacity: 0.5;
    }
    100% {
      transform: translateX(0);
      opacity: 0.4;
    }
  }
</style>
