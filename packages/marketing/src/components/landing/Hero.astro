---
import { Container } from "../Container";
import { Button } from "../generic/Button";
import screenshotNew from "../../../public/screenshot_new.png";
import { Image } from "astro:assets";
import "../../styles/grainy-gradient.css";

const imageSrc = screenshotNew;
const imageAlt =
  "Screenshot of the the Lydie platform including a sidebar with a document tree as well as the main WYSIWYG editor focusing on a document titled 'The Enduring Allure of Coffee'.";
---

<div class="md:px-4 mb-32">
  <div
    class="md:rounded-xl custom-inner-shadow grainy-gradient-container md:ring md:ring-black/20 relative md:px-4"
  >
    <div
      class="absolute bottom-0 inset-x-0 h-22 bg-linear-to-t from-black/20 z-20 gradient-overlay"
    >
    </div>
    <svg class="grainy-gradient-svg">
      <filter id="noiseFilter">
        <feTurbulence
          type="fractalNoise"
          baseFrequency="0.65"
          numOctaves="3"
          stitchTiles="stitch"></feTurbulence>
      </filter>
    </svg>
    <svg
      viewBox="0 0 256 256"
      xmlns="http://www.w3.org/2000/svg"
      class="embossed-logo"
    >
      <path
        fill="currentColor"
        fill-rule="evenodd"
        d="M41.27 222.049c-.67-.618-.218-1.727.695-1.712 37.82.621 81.574-4.599 123.467-20.608 31.858-12.175 62.564-30.604 88.556-57.154.664-.679 1.812-.141 1.699.802C248.073 206.82 193.944 256 128.302 256c-33.588 0-64.162-12.876-87.032-33.951ZM8.475 172.36a.985.985 0 0 1-.797-.643C2.71 158.076 0 143.354 0 128 0 57.308 57.443 0 128.302 0c53.062 0 98.601 32.136 118.129 77.965a.999.999 0 0 1-.072.916c-24.815 39.85-59.9 64.094-97.239 78.364-49.113 18.769-102.352 20.214-140.645 15.115Z"
        clip-rule="evenodd"></path>
    </svg>
    <Container
      className="flex flex-col relative z-20 pb-20 md:pb-16 md:pt-28 pt-20"
    >
      <div class="flex flex-col gap-y-3 max-w-2xl text-center mx-auto">
        <div
          class="mb-4 rounded-full bg-white/15 self-center px-2.5 py-[3px] flex items-center gap-x-1.5 hero-badge"
          style="box-shadow: 0 1px rgba(255,255,255,0.2) inset, 0 1px 3px rgba(0,0,0,0.1), 0 1px 1.5px 0 rgba(0,0,0,0.05), 0 0 1.5px 0 rgba(0,0,0,0.1), 0 0 40px rgba(255,255,255,0.05), 0 0 80px rgba(255,255,255,0.02), 0 0 120px rgba(255,255,255,0.02);"
        >
          <span class="text-[12px] font-medium text-white"
            >Now in open beta!</span
          >
        </div>
        <h1
          class="text-5xl font-heading font-medium tracking-tight text-white drop-shadow-text"
        >
          <span class="hero-word-1">Centralize</span>{" "}
          <span class="hero-word-2">your</span>{" "}
          <span class="hero-word-3">writing</span>
        </h1>
        <p class="text-[17px]/relaxed text-white/90 text-balance">
          <span class="hero-sentence-1"
            >Lydie is a writing workspace that adapts to your needs.</span
          >
          <br />
          <span class="hero-sentence-2"
            >An open-source alternative to Google Docs, Notion and others.</span
          >
        </p>
        <div class="flex items-center justify-center gap-x-1.5 mt-4">
          <div
            class="hero-button-1 ring ring-white/1 p-0.5 bg-black/4 rounded-[8px]"
          >
            <Button
              href="https://app.lydie.co/auth"
              size="lg"
              intent="primary"
              client:load
            >
              <span>Start Lydie free</span>
            </Button>
          </div>
          <div class="hero-button-2">
            <Button
              href="https://github.com/lsalling/lydie"
              size="lg"
              target="_blank"
              intent="ghost"
              className="text-white hover:bg-white/10"
              client:load
            >
              <div class="flex items-center gap-x-1.5">
                <span>Star on GitHub</span>
              </div>
            </Button>
          </div>
        </div>
      </div>
    </Container>
    <div
      class="relative z-10 bg-white/20 hidden rounded-[14px] -mb-40 p-2 md:flex flex-col before:pointer-events-none before:absolute before:bottom-0 before:left-0 before:right-0 before:h-60 before:bg-linear-to-t before:from-black/40 before:via-black/20 before:to-transparent before:rounded-b-xl before:-z-10 after:pointer-events-none after:absolute after:inset-0 after:-z-10 after:rounded-xl after:bg-linear-to-b after:from-white/14 after:mix-blend-overlay max-w-6xl mx-auto hero-image"
      style="box-shadow: 0 1px rgba(255,255,255,0.3) inset, 0 1px 3px rgba(0,0,0,0.15), 0 1px 1.5px 0 rgba(0,0,0,0.08), 0 0 1.5px 0 rgba(0,0,0,0.2), 0 0 40px rgba(255,255,255,0.09), 0 0 80px rgba(255,255,255,0.06), 0 0 120px rgba(255,255,255,0.03);"
    >
      <div class="shimmer-container absolute inset-0 pointer-events-none"></div>
      <div class="flex items-center gap-x-1.5 mb-2 relative z-10">
        {
          [...Array(2)].map(() => (
            <div
              class="rounded-full size-[13px] bg-white/20"
              style="box-shadow: 0 1px rgba(255,255,255,0.3) inset, 0 1px 3px rgba(0,0,0,0.15), 0 1px 1.5px 0 rgba(0,0,0,0.08), 0 0 1.5px 0 rgba(0,0,0,0.2), 0 0 40px rgba(255,255,255,0.09), 0 0 80px rgba(255,255,255,0.06), 0 0 120px rgba(255,255,255,0.03);"
            />
          ))
        }
        <div class="relative group demo-button-container">
          <div class="demo-glow"></div>
          <div class="demo-particles">
            <div class="demo-rotate">
              {
                [...Array(3)].map((_, i) => (
                  <div class="demo-angle">
                    <div class="demo-size">
                      <div class="demo-position">
                        <div class="demo-particle" />
                      </div>
                    </div>
                  </div>
                ))
              }
            </div>
          </div>
          <div
            class="rounded-full size-[13px] bg-green-300 cursor-pointer relative z-10 flex items-center justify-center"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="32"
              height="32"
              viewBox="0 0 24 24"
              class="size-[11px] text-green-800 -rotate-45"
            >
              <path fill="currentColor" d="m18 9l-6-6l-6 6zm0 6l-6 6l-6-6z"
              ></path></svg
            >
          </div>
          <div
            class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-medium rounded-md shadow-lg whitespace-nowrap pointer-events-none z-50"
          >
            Click to demo!
            <div
              class="absolute top-full left-1/2 -translate-x-1/2 -mt-px border-4 border-transparent border-t-gray-900"
            >
            </div>
          </div>
        </div>
      </div>

      <div
        class="p-px ring ring-white/20 rounded-[9px] bg-white/10 relative overflow-hidden"
      >
        <div
          class="rounded-lg overflow-hidden shadow-surface ring ring-black/8 relative z-10"
        >
          <Image src={imageSrc} alt={imageAlt} quality={100} loading="eager" />
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .embossed-logo {
    position: absolute;
    top: 20%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 240%;
    pointer-events: none;
    z-index: 2;
    color: rgba(0, 0, 0, 0.2);
  }

  @media (min-width: 768px) {
    .embossed-logo {
      width: 140%;
    }
  }

  .drop-shadow-text {
    text-shadow:
      0 2px 8px rgba(0, 0, 0, 0.3),
      0 1px 3px rgba(0, 0, 0, 0.2);
  }

  .custom-inner-shadow {
    box-shadow:
      inset 0 2px 8px rgba(0, 0, 0, 0.15),
      inset 0 1px 4px rgba(0, 0, 0, 0.2),
      inset 0 0 0 1px rgba(0, 0, 0, 0.1),
      inset 0 -2px 12px rgba(0, 0, 0, 0.12);
  }

  /* Animation keyframes for hero elements - bottom to top */
  @keyframes hero-fade-in-up {
    from {
      opacity: 0;
      transform: translateY(14px);
      filter: blur(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
      filter: blur(0px);
    }
  }

  @keyframes hero-image-fade-in-up {
    from {
      opacity: 0;
      transform: translateY(8px);
      filter: blur(2px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
      filter: blur(0px);
    }
  }

  /* Apply animations to hero elements */
  /* Staggered word animations */
  .hero-word-1 {
    display: inline-block;
    animation: hero-fade-in-up 0.8s ease-out 0.3s both;
  }

  .hero-word-2 {
    display: inline-block;
    animation: hero-fade-in-up 0.8s ease-out 0.42s both;
  }

  .hero-word-3 {
    display: inline-block;
    animation: hero-fade-in-up 0.8s ease-out 0.54s both;
  }

  /* Staggered sentence animations */
  .hero-sentence-1 {
    display: inline-block;
    animation: hero-fade-in-up 0.8s ease-out 0.7s both;
  }

  .hero-sentence-2 {
    display: inline-block;
    animation: hero-fade-in-up 0.8s ease-out 0.85s both;
  }

  /* Staggered button animations */
  .hero-button-1 {
    animation: hero-fade-in-up 0.6s ease-out 1s both;
  }

  .hero-button-2 {
    animation: hero-fade-in-up 0.6s ease-out 1.15s both;
  }

  /* Badge comes in last */
  .hero-badge {
    animation: hero-fade-in-up 0.6s ease-out 1.3s both;
  }

  .hero-image {
    animation: hero-image-fade-in-up 1s ease-out 0.8s both;
  }

  /* Shimmer effect for screenshot container */
  .shimmer-container {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    border-radius: 14px;
    overflow: hidden;
  }

  .shimmer-container::before {
    content: "";
    position: absolute;
    pointer-events: none;
    z-index: 0;
    border-radius: 14px;
  }

  .shimmer-container::before {
    top: -10%;
    left: 0;
    width: 40%;
    height: 30%;
    background: radial-gradient(
      ellipse,
      rgba(255, 255, 255, 0.3) 0%,
      rgba(255, 255, 255, 0.15) 50%,
      transparent 100%
    );
    filter: blur(20px);
    animation: shimmer-sweep 8s ease-in-out infinite;
  }

  @keyframes shimmer-sweep {
    0% {
      transform: translateX(0);
      opacity: 0.4;
    }
    50% {
      transform: translateX(calc(100% - 40%));
      opacity: 0.5;
    }
    100% {
      transform: translateX(0);
      opacity: 0.4;
    }
  }
  /* Demo button shimmer and particles */
  .demo-button-container {
    overflow: visible;
  }

  .demo-glow {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 14px;
    height: 14px;
    border-radius: 50%;
    pointer-events: none;
    kground: rgba(34, 197, 94, 0.2);
    animation: demo-glow 3s linear 0s infinite alternate;
  }

  .demo-particles {
    position: absolute;
    top: calc(50% - 25px);
    left: calc(50% - 25px);
    width: 50px;
    height: 50px;
    pointer-events: none;
  }

  .demo-rotate {
    position: absolute;
    top: calc(50% - 5px);
    left: calc(50% - 5px);
    width: 10px;
    height: 10px;
    animation: demo-rotate 20s linear 0s infinite;
  }

  .demo-angle {
    position: absolute;
    top: 0;
    left: 0;
  }

  .demo-size {
    position: absolute;
    top: 0;
    left: 0;
  }

  .demo-position {
    position: absolute;
    top: 0;
    left: 0;
  }

  .demo-particle {
    position: absolute;
    top: calc(50% - 2.5px);
    left: calc(50% - 2.5px);
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: rgba(34, 197, 94, 0.8);
    animation: demo-particle-glow 6s linear infinite alternate;
  }

  @keyframes demo-glow {
    0% {
      transform: translate(-50%, -50%) rotate(0deg);
      box-shadow:
        0 0 30px 10px rgba(34, 197, 94, 0.5),
        15px 10px 30px 5px rgba(74, 222, 128, 0.4),
        -5px -15px 20px 3px rgba(134, 239, 172, 0.3);
    }
    100% {
      transform: translate(-50%, -50%) rotate(5deg);
      box-shadow:
        0 0 50px 15px rgba(34, 197, 94, 0.7),
        25px 15px 40px 8px rgba(74, 222, 128, 0.5),
        -20px -20px 30px 5px rgba(134, 239, 172, 0.4);
    }
  }

  @keyframes demo-rotate {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  @keyframes demo-angle {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  @keyframes demo-size {
    0% {
      transform: scale(0.2);
    }
    100% {
      transform: scale(0.6);
    }
  }

  @keyframes demo-position {
    0% {
      transform: translate3d(0, 0, 0);
      opacity: 1;
    }
    50% {
      opacity: 0.8;
    }
    100% {
      transform: translate3d(0, -60px, 0);
      opacity: 0;
    }
  }

  @keyframes demo-particle-glow {
    0% {
      box-shadow:
        inset 0 0 10px 10px rgba(34, 197, 94, 0.7),
        0 0 30px 5px rgba(34, 197, 94, 0.5),
        inset 0 0 40px 40px rgba(74, 222, 128, 0.6);
      background: rgba(34, 197, 94, 0.8);
    }
    33.33% {
      box-shadow:
        inset 0 0 10px 10px rgba(34, 197, 94, 0.7),
        0 0 80px 5px rgba(34, 197, 94, 0.6),
        inset 0 0 30px 30px rgba(74, 222, 128, 0.7);
      background: rgba(34, 197, 94, 0.8);
    }
    33.34% {
      box-shadow:
        inset 0 0 10px 10px rgba(74, 222, 128, 0.7),
        0 0 30px 5px rgba(74, 222, 128, 0.5),
        inset 0 0 40px 40px rgba(134, 239, 172, 0.6);
      background: rgba(74, 222, 128, 0.8);
    }
    66.66% {
      box-shadow:
        inset 0 0 10px 10px rgba(74, 222, 128, 0.7),
        0 0 80px 5px rgba(74, 222, 128, 0.6),
        inset 0 0 30px 30px rgba(134, 239, 172, 0.7);
      background: rgba(74, 222, 128, 0.8);
    }
    66.67% {
      box-shadow:
        inset 0 0 10px 10px rgba(134, 239, 172, 0.7),
        0 0 30px 5px rgba(134, 239, 172, 0.5),
        inset 0 0 40px 40px rgba(187, 247, 208, 0.6);
      background: rgba(134, 239, 172, 0.8);
    }
    100% {
      box-shadow:
        inset 0 0 10px 10px rgba(134, 239, 172, 0.7),
        0 0 80px 5px rgba(134, 239, 172, 0.6),
        inset 0 0 30px 30px rgba(187, 247, 208, 0.7);
      background: rgba(134, 239, 172, 0.8);
    }
  }

  .demo-rotate .demo-angle:nth-child(1) {
    animation: demo-angle 10s steps(5) 0s infinite;
  }
  .demo-rotate .demo-angle:nth-child(1) .demo-size {
    animation: demo-size 10s steps(5) 0s infinite;
  }
  .demo-rotate .demo-angle:nth-child(1) .demo-particle {
    animation: demo-particle-glow 6s linear infinite alternate;
  }
  .demo-rotate .demo-angle:nth-child(1) .demo-position {
    animation: demo-position 2s linear 0s infinite;
  }

  .demo-rotate .demo-angle:nth-child(2) {
    animation: demo-angle 4.95s steps(3) -1.65s infinite;
  }
  .demo-rotate .demo-angle:nth-child(2) .demo-size {
    animation: demo-size 4.95s steps(3) -1.65s infinite alternate;
  }
  .demo-rotate .demo-angle:nth-child(2) .demo-particle {
    animation: demo-particle-glow 4.95s linear -3.3s infinite alternate;
  }
  .demo-rotate .demo-angle:nth-child(2) .demo-position {
    animation: demo-position 1.65s linear 0s infinite;
  }

  .demo-rotate .demo-angle:nth-child(3) {
    animation: demo-angle 13.76s steps(8) -6.88s infinite;
  }
  .demo-rotate .demo-angle:nth-child(3) .demo-size {
    animation: demo-size 6.88s steps(4) -5.16s infinite alternate;
  }
  .demo-rotate .demo-angle:nth-child(3) .demo-particle {
    animation: demo-particle-glow 5.16s linear -1.72s infinite alternate;
  }
  .demo-rotate .demo-angle:nth-child(3) .demo-position {
    animation: demo-position 1.72s linear 0s infinite;
  }
</style>
