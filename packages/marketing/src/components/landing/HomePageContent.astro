---
import { getImage } from "astro:assets";
import { ChatSection } from "./ChatSection";
import IntegrationsSection from "./IntegrationsSection.astro";
import PerformanceSection from "./PerformanceSection.astro";
import { Hero } from "./Hero";
import ProblemSolutionSection from "./ProblemSolutionSection.astro";
import screenshot from "../../../public/screenshot3.png";
import Divider from "./Divider.astro";
import { DemoWithSelector } from "./DemoWithSelector";
import { CastShadow } from "../generic/CastShadow";
import { Button } from "../generic/Button";
import { KeyboardSection } from "./KeyboardSection";
import { FAQ } from "../generic/FAQ";
import { GradientOutline } from "../generic/GradientOutline";
import { DarkModeSection } from "./DarkModeSection";
import { SectionHeader } from "./SectionHeader";
import { CTASection } from "./CTASection";
import { MultiDocumentChatSection } from "./MultiDocumentChatSection";
import { SpeedSection } from "./SpeedSection";
import { Container } from "../Container";
import { HeroNew } from "./HeroNew";

const heroWidths = [640, 768, 1024, 1280, 1536, 1920, 2260];
const heroOptimizedImages = await Promise.all(
  heroWidths.map((width) =>
    getImage({
      src: screenshot,
      width,
      format: "webp",
      quality: 100,
    }),
  ),
);
const heroSrcset = heroOptimizedImages
  .map((img) => `${img.src} ${img.options.width}w`)
  .join(", ");
const heroDefaultImage = heroOptimizedImages[heroOptimizedImages.length - 1];

const faqItems = [
  {
    question: "What is Lydie?",
    answer:
      "Lydie is a modern writing workspace designed for structured documents, notes, and knowledge management. It combines a powerful WYSIWYG editor with AI-powered search and real-time collaboration features to help you organize and find information effortlessly.",
  },
  {
    question: "Is Lydie free to use?",
    answer:
      "Yes! Lydie is open-source and free to use. There are no hidden fees or vendor lock-in. Use our managed cloud service to get started. You're also welcome to modify and contribute to the codebase.",
  },
  {
    question: "Can I collaborate with my team in real-time?",
    answer:
      "Absolutely. Lydie supports real-time collaboration, allowing you and your team to work on documents simultaneously. Changes are synced instantly across all devices, so everyone stays up to date. [Learn more about collaborative editing.](/features/collaborative-editing)",
  },
  {
    question: "How does the AI-powered search work?",
    answer:
      "Lydie uses advanced AI to understand your documents and help you find information quickly. Instead of just matching keywords, the search understands the meaning and context of your content, making it easy to discover relevant information even when you don't remember the exact words.",
  },
];
---

<HeroNew
  client:load
  imageSrc={heroDefaultImage.src}
  imageSrcSet={heroSrcset}
  imageSizes="(max-width: 768px) 100vw, (max-width: 1536px) 90vw, 1536px"
  imageAlt="Screenshot of the the Lydie platform including a sidebar with a document tree as well as the main WYSIWYG editor focusing on a document titled 'The Enduring Allure of Coffee'."
  imageWidth={heroDefaultImage.options.width}
  imageHeight={heroDefaultImage.options.height}
/>
<!-- <ProblemSolutionSection /> -->

<!-- <Hero
  client:load
  imageSrc={heroDefaultImage.src}
  imageSrcSet={heroSrcset}
  imageSizes="(max-width: 768px) 100vw, (max-width: 1536px) 90vw, 1536px"
  imageAlt="Screenshot of the the Lydie platform including a sidebar with a document tree as well as the main WYSIWYG editor focusing on a document titled 'The Enduring Allure of Coffee'."
  imageWidth={heroDefaultImage.options.width}
  imageHeight={heroDefaultImage.options.height}
/> --><!-- <ProblemSolutionSection /> --><!-- <div class="max-w-4xl relative md:block hidden -z-10">
  <div
    class="fixed inset-y-0 w-1 border-r border-outline-subtle"
    style="left: calc(50% - 388px)"
  >
  </div>
  <div
    class="fixed inset-y-0 w-1 border-r border-outline-subtle"
    style="right: calc(50% - 388px)"
  >
  </div>
</div> -->
<Divider logo />
<Container className="pb-24 pt-16 hidden flex-col md:flex">
  <DemoWithSelector
    client:visible
    states={["collaboration", "linking", "assistant"]}
  >
    <SectionHeader
      eyebrow="Best-in-class editor"
      title="Experience the delight of writing"
      description="At Lydie's core is an ergonomic editor that feels natural - whether you're drafting quick notes or deep documentation."
    />
  </DemoWithSelector>
</Container>
<Divider />
<Container className="relative my-24 flex flex-col gap-y-24">
  <MultiDocumentChatSection />
  <!-- <Divider logo />
  <SpeedSection /> -->
</Container>

<Divider />

<Container>
  <KeyboardSection client:visible />
</Container>

<Divider />

<!-- <DarkModeSection client:load /> -->

<Container size="sm" className="py-16">
  <div class="md:px-12">
    <FAQ items={faqItems} client:load />
  </div>
</Container>

<Divider />
<CTASection client:load />

<!-- <ChatSection
  client:load
  imageSrc={chatDefaultImage.src}
  imageSrcSet={chatSrcset}
  imageSizes="(max-width: 768px) 100vw, 980px"
  imageAlt="Screenshot showing AI chat interface with document editing suggestions"
  imageWidth={chatDefaultImage.options.width}
  imageHeight={chatDefaultImage.options.height}
/> -->
<!-- <PerformanceSection />
<IntegrationsSection /> -->
<!-- <CTASection client:load /> -->
