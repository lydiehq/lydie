---
import { getImage } from "astro:assets";
import { ChatSection } from "./ChatSection";
import CollaborationSection from "./CollaborationSection.astro";
import IntegrationsSection from "./IntegrationsSection.astro";
import PerformanceSection from "./PerformanceSection.astro";
import UseCasesSection from "./UseCasesSection.astro";
import EditorFeaturesSection from "./EditorFeaturesSection.astro";
import { Hero } from "./Hero";
import { Search, Globe, ChevronRight, Share2 } from "lucide-react";
import { Container } from "../Container";
import screenshotChat from "../../../public/screenshot_document_chat.png";
import { Button } from "../generic/Button";

const chatWidths = [400, 640, 980, 1280, 1920];
const chatOptimizedImages = await Promise.all(
  chatWidths.map((width) =>
    getImage({
      src: screenshotChat,
      width,
      format: "webp",
      quality: 100,
    })
  )
);
const chatSrcset = chatOptimizedImages
  .map((img) => `${img.src} ${img.options.width}w`)
  .join(", ");
const chatDefaultImage = chatOptimizedImages[chatOptimizedImages.length - 1];

const keyBenefits = [
  {
    title: "Find information instantly",
    description: "Search across all your documents with AI-powered search.",
    icon: Search,
  },
  {
    title: "Collaborate in real-time",
    description: "Stay in sync with your team or across devices with ease.",
    icon: Share2,
  },
  {
    title: "Open-source",
    description:
      "Free to use, modify, and contribute. No hidden fees or vendor lock-in.",
    icon: Globe,
  },
];
---

<div class="flex flex-col gap-y-16 overflow-hidden">
  <Hero client:load />
</div>
<Container className="flex flex-col gap-y-12 relative">
  <div class="grid md:grid-cols-3 grid-cols-1 gap-6">
    {
      keyBenefits.map((benefit) => (
        <div class="flex flex-col gap-y-2">
          <div class="flex items-center gap-x-2">
            <benefit.icon className="size-4 text-gray-700" />
            <span class="font-medium text-[15px]/0 text-gray-900">
              {benefit.title}
            </span>
          </div>
          <p class="text-sm text-gray-600 leading-relaxed">
            {benefit.description}
          </p>
        </div>
      ))
    }
  </div>
  <hr class="border-gray-100 w-full max-w-5xl mx-auto" />
</Container>
<Container>
  <EditorFeaturesSection />
  <CollaborationSection />
</Container>
<ChatSection
  client:load
  imageSrc={chatDefaultImage.src}
  imageSrcSet={chatSrcset}
  imageSizes="(max-width: 768px) 100vw, 980px"
  imageAlt="Screenshot showing AI chat interface with document editing suggestions"
  imageWidth={chatDefaultImage.options.width}
  imageHeight={chatDefaultImage.options.height}
/>
<UseCasesSection />
<PerformanceSection />
<IntegrationsSection />
<Container className="flex flex-col gap-y-6 relative pb-16">
  <div class="flex flex-col gap-y-4 text-center max-w-2xl mx-auto">
    <h2 class="text-3xl font-heading font-medium tracking-tight text-gray-900">
      Start writing smarter today
    </h2>
    <p class="text-[15px] text-gray-600">
      Start writing better, faster with AI that understands your work.
    </p>
    <div class="flex justify-center mt-4">
      <Button href="https://app.lydie.co/auth" size="lg">
        <div class="flex items-center gap-x-1">
          <span>Try Lydie free</span>
          <ChevronRight
            className="size-3.5 translate-y-px group-hover:translate-x-0.5 transition-transform duration-200"
          />
        </div>
      </Button>
    </div>
  </div>
</Container>
