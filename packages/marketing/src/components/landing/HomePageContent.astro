---
import { getImage } from "astro:assets";
import { ChatSection } from "./ChatSection";
import CollaborationSection from "./CollaborationSection.astro";
import IntegrationsSection from "./IntegrationsSection.astro";
import PerformanceSection from "./PerformanceSection.astro";
import UseCasesSection from "./UseCasesSection.astro";
import { Hero } from "./Hero";
import ProblemSolutionSection from "./ProblemSolutionSection.astro";
import { CTASection } from "./CTASection";
import {
  ChevronRightRegular,
  GlobeRegular,
  SearchRegular,
  ShareRegular,
} from "@fluentui/react-icons";
import { Container } from "../Container";
import screenshot from "../../../public/screenshot3.png";
import Divider from "./Divider.astro";
import { InteractiveEditorDemo } from "./InteractiveEditorDemo";
import { Button } from "../generic/Button";
import { Eyebrow } from "./Eyebrow";
import { FAQ } from "../generic/FAQ";

const heroWidths = [640, 768, 1024, 1280, 1536, 1920, 2260];
const heroOptimizedImages = await Promise.all(
  heroWidths.map((width) =>
    getImage({
      src: screenshot,
      width,
      format: "webp",
      quality: 100,
    })
  )
);
const heroSrcset = heroOptimizedImages
  .map((img) => `${img.src} ${img.options.width}w`)
  .join(", ");
const heroDefaultImage = heroOptimizedImages[heroOptimizedImages.length - 1];

const keyBenefits = [
  {
    title: "Find information instantly",
    description: "Search across all your documents with AI-powered search.",
    icon: SearchRegular,
  },
  {
    title: "Collaborate in real-time",
    description: "Stay in sync with your team or across devices with ease.",
    icon: ShareRegular,
  },
  {
    title: "Open-source",
    description:
      "Free to use, modify, and contribute. No hidden fees or vendor lock-in.",
    icon: GlobeRegular,
  },
];

const faqItems = [
  {
    question: "What is Lydie?",
    answer:
      "Lydie is a modern writing workspace designed for structured documents, notes, and knowledge management. It combines a powerful WYSIWYG editor with AI-powered search and real-time collaboration features to help you organize and find information effortlessly.",
  },
  {
    question: "Is Lydie free to use?",
    answer:
      "Yes! Lydie is open-source and free to use. There are no hidden fees or vendor lock-in. You can self-host it or use our managed service. You're also welcome to modify and contribute to the codebase.",
  },
  {
    question: "Can I collaborate with my team in real-time?",
    answer:
      "Absolutely. Lydie supports real-time collaboration, allowing you and your team to work on documents simultaneously. Changes are synced instantly across all devices, so everyone stays up to date.",
  },
  {
    question: "How does the AI-powered search work?",
    answer:
      "Lydie uses advanced AI to understand your documents and help you find information quickly. Instead of just matching keywords, the search understands the meaning and context of your content, making it easy to discover relevant information even when you don't remember the exact words.",
  },
];
---

<Hero
  client:load
  imageSrc={heroDefaultImage.src}
  imageSrcSet={heroSrcset}
  imageSizes="(max-width: 768px) 100vw, (max-width: 1536px) 90vw, 1536px"
  imageAlt="Screenshot of the the Lydie platform including a sidebar with a document tree as well as the main WYSIWYG editor focusing on a document titled 'The Enduring Allure of Coffee'."
  imageWidth={heroDefaultImage.options.width}
  imageHeight={heroDefaultImage.options.height}
/>
<ProblemSolutionSection />

<div class="max-w-4xl relative">
  <!-- 768px internal width, centered (w-1 = 4px each side) -->
  <div
    class="fixed inset-y-0 w-1 border-r border-black/6"
    style="left: calc(50% - 388px)"
  >
  </div>
  <div
    class="fixed inset-y-0 w-1 border-r border-black/6"
    style="right: calc(50% - 388px)"
  >
  </div>
</div>
<Divider logo />

<Container className="py-12">
  <InteractiveEditorDemo client:visible />
</Container>

<Container>
  <div class="rounded-2xl bg-gray-100 relative grid grid-cols-2">
    <div class="col-span-1"></div>

    <div class="col-span-1 relative"></div>
  </div>
  <!-- <EditorFeaturesSection /> -->
  <!-- <CollaborationSection /> -->
</Container>
<!-- <Container className="flex flex-col gap-y-12 relative" size="sm">
  <div class="grid md:grid-cols-2 grid-cols-1 gap-6">
    {
      keyBenefits.map((benefit) => (
        <div class="flex flex-col gap-y-2">
          <div class="flex items-center gap-x-2">
            <benefit.icon className="size-4 text-gray-700" />
            <span class="font-medium text-[15px]/0 text-gray-900">
              {benefit.title}
            </span>
          </div>
          <p class="text-sm text-gray-600 leading-relaxed">
            {benefit.description}
          </p>
        </div>
      ))
    }
  </div>
  <hr class="border-gray-100 w-full max-w-5xl mx-auto" />
</Container> -->

<Divider logo />
<Container size="sm" className="py-16">
  <div class="px-12">
    <FAQ items={faqItems} client:load />
  </div>
</Container>

<Divider />
<Container size="sm">
  <div class="flex flex-col gap-y-3 p-16 items-center text-center">
    <h2 class="text-3xl tracking-tight font-medium text-black/85">
      Ready to try it yourself?
    </h2>
    <p class="text-sm/relaxed text-black/60 text-balance">
      Create your first document in seconds. No credit card required.
    </p>
    <Button href="https://app.lydie.co/auth" size="lg" intent="primary">
      <span>Get started for free</span>
      <ChevronRightRegular
        className="size-3.5 translate-y-px group-hover:translate-x-0.5 transition-transform duration-200"
      />
    </Button>
  </div>
</Container>

<!-- <ChatSection
  client:load
  imageSrc={chatDefaultImage.src}
  imageSrcSet={chatSrcset}
  imageSizes="(max-width: 768px) 100vw, 980px"
  imageAlt="Screenshot showing AI chat interface with document editing suggestions"
  imageWidth={chatDefaultImage.options.width}
  imageHeight={chatDefaultImage.options.height}
/> -->
<!-- <UseCasesSection />
<PerformanceSection />
<IntegrationsSection /> -->
<!-- <CTASection client:load /> -->
