---
import { getImage } from "astro:assets";
import { ChatSection } from "./ChatSection";
import IntegrationsSection from "./IntegrationsSection.astro";
import PerformanceSection from "./PerformanceSection.astro";
import { Hero } from "./Hero";
import ProblemSolutionSection from "./ProblemSolutionSection.astro";
import {
  ChevronRightRegular,
  GlobeRegular,
  SearchRegular,
  ShareRegular,
} from "@fluentui/react-icons";
import screenshot from "../../../public/screenshot3.png";
import Divider from "./Divider.astro";
import { DemoWithSelector } from "./DemoWithSelector";
import { CastShadow } from "../generic/CastShadow";
import { Button } from "../generic/Button";
import { KeyboardSection } from "./KeyboardSection";
import { FAQSection } from "../tools/FAQSection";
import { GradientOutline } from "../generic/GradientOutline";
import { DarkModeSection } from "./DarkModeSection";
import { SectionHeader } from "./SectionHeader";
import { CTASection } from "./CTASection";
import { MultiDocumentChatSection } from "./MultiDocumentChatSection";
import { SpeedSection } from "./SpeedSection";
import { Container } from "../Container";

const heroWidths = [640, 768, 1024, 1280, 1536, 1920, 2260];
const heroOptimizedImages = await Promise.all(
  heroWidths.map((width) =>
    getImage({
      src: screenshot,
      width,
      format: "webp",
      quality: 100,
    }),
  ),
);
const heroSrcset = heroOptimizedImages
  .map((img) => `${img.src} ${img.options.width}w`)
  .join(", ");
const heroDefaultImage = heroOptimizedImages[heroOptimizedImages.length - 1];

const keyBenefits = [
  {
    title: "Find information instantly",
    description: "Search across all your documents with AI-powered search.",
    icon: SearchRegular,
  },
  {
    title: "Collaborate in real-time",
    description: "Stay in sync with your team or across devices with ease.",
    icon: ShareRegular,
  },
  {
    title: "Open-source",
    description:
      "Free to use, modify, and contribute. No hidden fees or vendor lock-in.",
    icon: GlobeRegular,
  },
];

const faqItems = [
  {
    q: "What is Lydie?",
    a: "Lydie is a modern writing workspace designed for structured documents, notes, and knowledge management. It combines a powerful WYSIWYG editor with AI-powered search and real-time collaboration features to help you organize and find information effortlessly.",
  },
  {
    q: "Is Lydie free to use?",
    a: "Yes! Lydie is open-source and free to use. There are no hidden fees or vendor lock-in. You can self-host it or use our managed service. You're also welcome to modify and contribute to the codebase.",
  },
  {
    q: "Can I collaborate with my team in real-time?",
    a: "Absolutely. Lydie supports real-time collaboration, allowing you and your team to work on documents simultaneously. Changes are synced instantly across all devices, so everyone stays up to date. [Learn more about collaborative editing.](/features/collaborative-editing)",
  },
  {
    q: "How does the AI-powered search work?",
    a: "Lydie uses advanced AI to understand your documents and help you find information quickly. Instead of just matching keywords, the search understands the meaning and context of your content, making it easy to discover relevant information even when you don't remember the exact words.",
  },
];
---

<Hero
  client:load
  imageSrc={heroDefaultImage.src}
  imageSrcSet={heroSrcset}
  imageSizes="(max-width: 768px) 100vw, (max-width: 1536px) 90vw, 1536px"
  imageAlt="Screenshot of the the Lydie platform including a sidebar with a document tree as well as the main WYSIWYG editor focusing on a document titled 'The Enduring Allure of Coffee'."
  imageWidth={heroDefaultImage.options.width}
  imageHeight={heroDefaultImage.options.height}
/>
<ProblemSolutionSection />

<!-- <div class="max-w-4xl relative md:block hidden -z-10">
  <div
    class="fixed inset-y-0 w-1 border-r border-outline-subtle"
    style="left: calc(50% - 388px)"
  >
  </div>
  <div
    class="fixed inset-y-0 w-1 border-r border-outline-subtle"
    style="right: calc(50% - 388px)"
  >
  </div>
</div> -->
<Divider logo />

<Container className="pb-24 pt-16 flex flex-col items-center">
  <SectionHeader
    eyebrow="Best-in-class editor"
    title="Experience the delight of writing"
    description="At Lydie's core is an ergonomic editor that feels natural - whether you're drafting quick notes or deep documentation."
    centered
  />
  <div class="w-full mt-12 -mx-4 md:mx-0">
    <DemoWithSelector
      client:visible
      states={["collaboration", "linking", "ai-assistant"]}
    />
  </div>
</Container>
<Divider />
<Container className="relative my-24 flex flex-col gap-y-24">
  <SpeedSection />

  <!-- <Container className="flex flex-col gap-y-12 relative" size="sm">
  <div class="grid md:grid-cols-2 grid-cols-1 gap-6">
    {
      keyBenefits.map((benefit) => (
        <div class="flex flex-col gap-y-2">
          <div class="flex items-center gap-x-2">
            <benefit.icon className="size-4 text-gray-700" />
            <span class="font-medium text-[15px]/0 text-gray-900">
              {benefit.title}
            </span>
          </div>
          <p class="text-sm text-gray-600 leading-relaxed">
            {benefit.description}
          </p>
        </div>
      ))
    }
  </div>
  <hr class="border-gray-100 w-full max-w-5xl mx-auto" />
</Container> -->

  <Divider logo />

  <MultiDocumentChatSection client:load />
</Container>

<Divider />

<Container>
  <KeyboardSection client:visible />
</Container>

<Divider />

<!-- <DarkModeSection client:load /> -->

<Container size="sm" className="py-16">
  <div class="md:px-12">
    <FAQSection faqs={faqItems} client:load />
  </div>
</Container>

<Divider />
<CTASection client:load />

<!-- <ChatSection
  client:load
  imageSrc={chatDefaultImage.src}
  imageSrcSet={chatSrcset}
  imageSizes="(max-width: 768px) 100vw, 980px"
  imageAlt="Screenshot showing AI chat interface with document editing suggestions"
  imageWidth={chatDefaultImage.options.width}
  imageHeight={chatDefaultImage.options.height}
/> -->
<!-- <PerformanceSection />
<IntegrationsSection /> -->
<!-- <CTASection client:load /> -->
