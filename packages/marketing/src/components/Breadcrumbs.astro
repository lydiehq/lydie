---
import { ChevronRightRegular } from "@fluentui/react-icons";

interface Crumb {
  label: string;
  href?: string | null;
}

interface Props {
  items: Crumb[];
}

const { items } = Astro.props;

const baseUrl = "https://lydie.co";

const breadcrumbData = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  itemListElement: items.map((item, index) => ({
    "@type": "ListItem",
    position: index + 1,
    name: item.label,
    item: item.href ? `${baseUrl}${item.href}` : undefined,
  })),
};
---

<script type="application/ld+json" set:html={JSON.stringify(breadcrumbData)} />
<nav class="flex text-[13px] text-gray-400" aria-label="Breadcrumb">
  <ol class="inline-flex items-center gap-x-1.5">
    {
      items.map((crumb, index) => {
        const isLast = index === items.length - 1;
        const isFirst = index === 0;
        return (
          <li
            class={isFirst ? "inline-flex items-center" : ""}
            aria-current={isLast ? "page" : undefined}
          >
            <div class="flex items-center gap-x-1.5">
              {!isFirst && (
                <ChevronRightRegular className="size-3 text-gray-400" />
              )}
              {crumb.href ? (
                <a href={crumb.href} class="hover:text-gray-900">
                  {crumb.label}
                </a>
              ) : (
                <span class="text-gray-900">{crumb.label}</span>
              )}
            </div>
          </li>
        );
      })
    }
  </ol>
</nav>
