---
interface Crumb {
  label: string;
  href?: string | null;
}

interface Props {
  items: Crumb[];
}

const { items } = Astro.props;

const baseUrl = "https://lydie.co";

const breadcrumbData = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  itemListElement: items.map((item, index) => ({
    "@type": "ListItem",
    position: index + 1,
    name: item.label,
    item: item.href ? `${baseUrl}${item.href}` : undefined,
  })),
};
---

<script type="application/ld+json" set:html={JSON.stringify(breadcrumbData)} />
<nav class="flex text-[13px] text-gray-600" aria-label="Breadcrumb">
  <ol class="inline-flex items-center gap-x-1.5">
    {
      items.map((crumb, index) => {
        const isLast = index === items.length - 1;
        const isFirst = index === 0;
        return (
          <li
            class={isFirst ? "inline-flex items-center" : ""}
            aria-current={isLast ? "page" : undefined}
          >
            <div class="flex items-center gap-x-1.5">
              {!isFirst && (
                <svg
                  class="size-4 text-gray-400"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  aria-hidden="true"
                >
                  <path
                    fill-rule="evenodd"
                    d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"
                    clip-rule="evenodd"
                  />
                </svg>
              )}
              {crumb.href ? (
                <a href={crumb.href} class="hover:text-gray-900">
                  {crumb.label}
                </a>
              ) : (
                <span class="text-gray-900">{crumb.label}</span>
              )}
            </div>
          </li>
        );
      })
    }
  </ol>
</nav>
